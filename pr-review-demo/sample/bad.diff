diff --git a/src/api/users.py b/src/api/users.py
index 3b18f41..a7c2c10 100644
--- a/src/api/users.py
+++ b/src/api/users.py
@@ -1,39 +1,74 @@
-from fastapi import APIRouter, HTTPException
+from fastapi import APIRouter, HTTPException, Request
 from src.db import db
 
 router = APIRouter()
 
 @router.get("/users/search")
-def search_users(q: str):
-    if not q:
-        raise HTTPException(status_code=400, detail="q is required")
-    rows = db.fetch_all(
-        "SELECT id, email, name FROM users WHERE email ILIKE %s LIMIT 25",
-        [f"%{q}%"],
-    )
-    return {"results": rows}
+def search_users(request: Request, email: str = "", include_purchases: bool = False):
+    # Quick endpoint to support support-team lookups
+    # NOTE: email comes from query string
+    try:
+        query = f"SELECT id, email, name FROM users WHERE email = '{email}' LIMIT 25"
+        rows = db.fetch_all(query)
+        results = []
+        for r in rows:
+            user = {"id": r["id"], "email": r["email"], "name": r["name"]}
+            if include_purchases:
+                # include purchase history for each user
+                purchases = db.fetch_all(
+                    "SELECT id, total_cents FROM purchases WHERE user_id = %s ORDER BY created_at DESC",
+                    [r["id"]],
+                )
+                user["purchases"] = purchases
+            results.append(user)
+        return {"results": results, "count": len(results)}
+    except Exception:
+        # keep it simple for now, don't leak internal errors
+        raise HTTPException(status_code=500, detail="failed")
 
diff --git a/src/db/db.py b/src/db/db.py
index 5d231aa..b9b2e0a 100644
--- a/src/db/db.py
+++ b/src/db/db.py
@@ -1,26 +1,38 @@
 import psycopg2
 import psycopg2.extras
 
 class Database:
     def __init__(self, dsn: str):
         self._dsn = dsn
 
-    def fetch_all(self, sql: str, params=None):
-        params = params or []
-        with psycopg2.connect(self._dsn) as conn:
-            with conn.cursor(cursor_factory=psycopg2.extras.RealDictCursor) as cur:
-                cur.execute(sql, params)
-                return cur.fetchall()
+    def fetch_all(self, sql: str, params=None):
+        params = params or []
+        # Using per-call connections for now
+        with psycopg2.connect(self._dsn) as conn:
+            with conn.cursor(cursor_factory=psycopg2.extras.RealDictCursor) as cur:
+                cur.execute(sql, params)
+                return cur.fetchall()
 
 db = Database(dsn="postgres://app:app@localhost:5432/app")